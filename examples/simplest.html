<html>
    <head>
        <title>Add 2 int</title>
        <script src='https://code.jquery.com/jquery-2.x-git.min.js'></script>
    </head>
    <body>
        <h1>ADD two INT</h1>

        <p>
            Run <tt>simplest.py</tt> before trying to use this interface...
        </p>

        <input id="n1" type="text" placeholder="first number..."/>
        <input id="n2" type="text" placeholder="second number..."/>
        <button onclick="api_add()">ADD</button>

        <div id="parent-addition-result" style="display: None">
            Result : <span id="addition-result">NO DATA</span>
        </div>

        <script>
            // This is the function called when `ADD` button clicked
            async function api_add() {
                // Let's use the generated function (see bellow)
                const res = await add(
                    // Get inputs values as parameter of our function
                    parseInt(document.getElementById("n1").value),
                    parseInt(document.getElementById("n2").value)
                );

                // Display our result
                document.getElementById("addition-result").innerText = res;
                document.getElementById("parent-addition-result").style["display"] = "block";
            }

            // Code generated by the documentation of the API
            // http://localhost:8888/help/add
            // in the JavaScript section
            async function add(a, b) {
                keys = ["a", "b"];
                if (arguments.length > keys.length)
                    throw new Exception('Too many arguments...');
                params = {};
                for (var i = 0; i < arguments.length; i++)
                    params[keys[i]] = arguments[i];
                params = JSON.stringify(params);
                url = 'http://localhost:8888/add';
                const r = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: params
                });
                return await r.json();
            }
        </script>
    </body>
</html>
